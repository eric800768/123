# Compiler Final Project Readme
## 完成項目:

**I finish 1 to 8 Basic Features**

## 編譯方式:
```pseudo=
//Using .y file to generate tab.c and tab.h file
bison -d -o MiniLisp.tab.c MiniLisp.y
gcc -c -g -I.. MiniLisp.tab.c

//Using .l file to generate yy.c file
flex -o MiniLisp.yy.c MiniLisp.l
gcc -c -g -I.. MiniLisp.yy.c

//link .c generated by yacc and lex
gcc -o MiniLisp_exe MiniLisp.tab.o MiniLisp.yy.o -ll
```

## 執行測試結果:
```pesudo=
./MiniLisp_exe < "file_name".lsp
```
## 程式架構

### Lexical Detail
**讀取Token**
```l=
%{
#include "MiniLisp.tab.h"
%}
digit [0-9]
letter [a-z]
id {letter}({letter}|{digit}|-)*

%%
[ \t\r\n]+		{ /* do nothing */ }

/*以下為讀取string和ID*/
"print-num" 	{return PRINTNUM;}
"print-bool"  	{return PRINTBOOL;}
"and"		{return AND;}
"or"		{return OR;}
"not"		{return NOT;}
"if"		{return IF;}
"mod"		{return MOD;}
"define"	{return DEFINE;}
"fun"		{return FUN;}
{id}		{yylval.word = strdup(yytext); return ID;}

/*以下為讀取整數number*/
[0-9] 		        { yylval.ival = atoi(yytext);return(NUMBER); }
[-][0-9] 		{ yylval.ival = atoi(yytext);return(NUMBER); }
[1-9][0-9]+ 	       { yylval.ival = atoi(yytext);return(NUMBER); }
[-][1-9][0-9]+ 	{ yylval.ival = atoi(yytext);return(NUMBER); }

/*以下為讀取boolean value*/
#t			{ yylval.ival = 1; return(BOOLVAL);}
#f			{ yylval.ival = 0; return(BOOLVAL);}

/*以下為讀取operator*/
"+" | "-" | "*" | "/" | "(" | ")" | ">" | "<" | "="	{ return(yytext[0]); }
.				{ return(yytext[0]); }
%%
```
### Grammar definition

**在讀取到每個token後**
**建立AST 的new node 而參數別為(leftnode,rightnode,datatype)**
**接著藉由尋訪traversal判斷token的datatype去做讀取與運算**


| datatype | explaination |
| -------- | ------------ |
| +        | plus         |     
| -        | minus        |     
| *        | mutiply      |     
| /        | divide       |     
| %        | mod          |     
| >        | greater      |     
| <        | smaller      |     
| =        | equal        |     
| &        | and          |     
| \|       | or           |
| !        | not          |
| I        | if           |
| N        | number       |
| B        | boolval      |
| M        | more if mutiple exp      |
| P        |print-num     |
| p        |print-bool    |
| D        |define        |
| V        |variable      |
| F        |funexp        |
| X        |no param      |
| C        |funcall       |
| n        |funname       |



